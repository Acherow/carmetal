[gd_scene load_steps=16 format=3 uid="uid://djuogaauu2o05"]

[ext_resource type="PackedScene" uid="uid://7l1irinimxa" path="res://addons/srcoder_simplecar/car.tscn" id="1_fxqgc"]
[ext_resource type="PackedScene" uid="uid://rjx8tx5y7j2p" path="res://addons/srcoder_simplecar/follow_camera.tscn" id="2_m7ru0"]
[ext_resource type="Script" path="res://scripts/player_controller.gd" id="2_se1mj"]
[ext_resource type="Script" path="res://scripts/enemyAI.gd" id="3_kcsnn"]
[ext_resource type="Texture2D" uid="uid://cjseyimrkxxax" path="res://road.png" id="4_1hrhv"]
[ext_resource type="Script" path="res://scripts/race_manager.gd" id="5_6lhsm"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_bd5dm"]
sky_top_color = Color(0, 0.479349, 0.705601, 1)
sky_horizon_color = Color(4.62055e-06, 0.75839, 0.675317, 1)

[sub_resource type="Sky" id="Sky_d0m3a"]
sky_material = SubResource("ProceduralSkyMaterial_bd5dm")

[sub_resource type="Environment" id="Environment_565dx"]
background_mode = 2
sky = SubResource("Sky_d0m3a")
tonemap_mode = 2
glow_enabled = true
fog_light_color = Color(0.517647, 0.882353, 0.607843, 1)
volumetric_fog_enabled = true
volumetric_fog_albedo = Color(0.3036, 0.46, 0.3036, 1)

[sub_resource type="WorldBoundaryShape3D" id="WorldBoundaryShape3D_nc7ia"]

[sub_resource type="BoxShape3D" id="BoxShape3D_p8n8q"]
size = Vector3(20, 10, 20)

[sub_resource type="Curve3D" id="Curve3D_8i7f3"]
_data = {
"points": PackedVector3Array(-0.0135288, 0.137072, -4.20474, 0.014, 0, 4.205, -0.167936, 0, 0.855, -24.591, 0, -126.497, 24.591, 0, 126.497, 11.462, 0, 441.071, -96.817, 0, 51.746, 96.817, 0, -51.746, 389.442, 0, 493.882, 11.625, 0, 222.686, -11.625, 0, -222.686, 418.759, 0, 136.618, -204.014, 0, 305.951, 204.014, 0, -305.951, 433.882, 0, -257.447, 148.669, 0, -1.609, -148.669, 0, 1.609, 316.369, 0, -768.935, 73.769, 0, -191.983, -73.769, 0, 191.983, 0.824, 0, -503.899, 14.591, 0, -102.57, -14.591, 0, 102.57, 126.927, 0, -312.831, -1.254, 0, -17.783, 1.25368, -0.00933266, 17.783, -0.144, 0, 0.967),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0)
}
point_count = 9

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_g87kq"]
albedo_texture = ExtResource("4_1hrhv")
uv1_scale = Vector3(-0.255, 4, 4)
texture_filter = 2

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_v2pch"]
diffuse_mode = 3
albedo_color = Color(0.8, 0.691467, 0.208, 1)
metallic_specular = 0.0

[sub_resource type="PlaneMesh" id="PlaneMesh_flwbk"]
material = SubResource("StandardMaterial3D_v2pch")
size = Vector2(2000, 2000)

[node name="Node3D" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_565dx")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866025, -0.433013, 0.25, 0, 0.5, 0.866025, -0.5, 0.75, -0.433013, 0, 0, 0)
shadow_enabled = true

[node name="StaticBody3D" type="StaticBody3D" parent="."]

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D"]
shape = SubResource("WorldBoundaryShape3D_nc7ia")

[node name="CollisionShape3D2" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 0.965926, -0.258819, 0, 0.258819, 0.965926, 159.2, -2.5, 0)
shape = SubResource("BoxShape3D_p8n8q")

[node name="car" parent="." instance=ExtResource("1_fxqgc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.3924, 0)
linear_damp = 0.5
angular_damp = 2.0

[node name="PlayerController" type="Node" parent="car"]
script = ExtResource("2_se1mj")

[node name="car2" parent="." instance=ExtResource("1_fxqgc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.2, 1.3924, 0)
linear_damp = 0.5
angular_damp = 2.0

[node name="enemyController" type="Node" parent="car2"]
script = ExtResource("3_kcsnn")

[node name="FollowCamera" parent="." node_paths=PackedStringArray("follow_target") instance=ExtResource("2_m7ru0")]
follow_target = NodePath("../car")
rotation_damping = 10.0

[node name="Path3D" type="Path3D" parent="."]
curve = SubResource("Curve3D_8i7f3")

[node name="CSGPolygon3D" type="CSGPolygon3D" parent="Path3D"]
polygon = PackedVector2Array(-13, 0, 0, 0.1, 13, 0.1, 4, 0)
mode = 2
path_node = NodePath("..")
path_interval_type = 0
path_interval = 1.0
path_simplify_angle = 0.0
path_rotation = 2
path_local = false
path_continuous_u = true
path_u_distance = 10.0
path_joined = false
material = SubResource("StandardMaterial3D_g87kq")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.1, 0)
mesh = SubResource("PlaneMesh_flwbk")

[node name="racemanager" type="Node" parent="." node_paths=PackedStringArray("racerstobe", "path")]
unique_name_in_owner = true
script = ExtResource("5_6lhsm")
racerstobe = [NodePath("../car"), NodePath("../car2")]
path = NodePath("../Path3D")
