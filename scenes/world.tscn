[gd_scene load_steps=16 format=3 uid="uid://djuogaauu2o05"]

[ext_resource type="PackedScene" uid="uid://7l1irinimxa" path="res://addons/srcoder_simplecar/car.tscn" id="1_fxqgc"]
[ext_resource type="PackedScene" uid="uid://rjx8tx5y7j2p" path="res://addons/srcoder_simplecar/follow_camera.tscn" id="2_m7ru0"]
[ext_resource type="Script" path="res://scripts/player_controller.gd" id="2_se1mj"]
[ext_resource type="Script" path="res://scripts/enemyAI.gd" id="3_kcsnn"]
[ext_resource type="Texture2D" uid="uid://cjseyimrkxxax" path="res://road.png" id="4_1hrhv"]
[ext_resource type="Script" path="res://scripts/race_manager.gd" id="5_6lhsm"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_bd5dm"]
sky_top_color = Color(0, 0.479349, 0.705601, 1)
sky_horizon_color = Color(4.62055e-06, 0.75839, 0.675317, 1)

[sub_resource type="Sky" id="Sky_d0m3a"]
sky_material = SubResource("ProceduralSkyMaterial_bd5dm")

[sub_resource type="Environment" id="Environment_565dx"]
background_mode = 2
sky = SubResource("Sky_d0m3a")
tonemap_mode = 2
glow_enabled = true
fog_light_color = Color(0.517647, 0.882353, 0.607843, 1)
volumetric_fog_enabled = true
volumetric_fog_albedo = Color(0.3036, 0.46, 0.3036, 1)

[sub_resource type="WorldBoundaryShape3D" id="WorldBoundaryShape3D_nc7ia"]

[sub_resource type="BoxShape3D" id="BoxShape3D_p8n8q"]
size = Vector3(20, 10, 20)

[sub_resource type="Curve3D" id="Curve3D_8i7f3"]
_data = {
"points": PackedVector3Array(-0.4, 0, -4.2, 0.4, 0, 4.2, -0.167936, 0, 0.855, 0, 0, 0, 0, 0, 0, 3.97437, 0, 107.932, 6.20545, 0, -38.3571, -6.20545, 0, 38.3571, -2.55567, 0, 226.614, 0.0730543, 0, -28.4933, -0.0730543, 0, 28.4933, -13.7494, 0, 333.561, -24.3462, 0, -27.57, 24.3462, 0, 27.57, 11.462, 0, 441.071, -22.1379, 0, -12.2592, 22.1379, 0, 12.2592, 96.7223, 0, 504.789, -48.6308, 0, -2.37219, 48.6308, 0, 2.37219, 201.511, 0, 541.175, -22.1578, 0, 3.80841, 22.1578, 0, -3.80841, 304.92, 0, 533.193, -29.1917, 0, 21.4142, 29.1917, 0, -21.4142, 389.442, 0, 493.882, -8.55838, 0, 21.9461, 8.55838, 0, -21.9461, 449.004, 0, 415.554, 0.669189, 0, 40.9113, -0.669189, 0, -40.9113, 454.154, 0, 328.86, 0, 0, 0, 0, 0, 0, 439.368, 0, 224.784, 11.16, 0, 35.6987, -11.16, 0, -35.6987, 418.759, 0, 136.618, 20.8471, 0, 37.4801, -20.8471, 0, -37.4801, 377.167, 0, 44.5589, 3.96155, 0, 56.5207, -3.96155, 0, -56.5207, 336.378, 0, -57.1479, -21.1472, 0, 32.0411, 21.1472, 0, -32.0411, 377.148, 0, -154.103, -37.5066, 0, 72.0663, 37.5066, 0, -72.0663, 433.882, 0, -257.447, -12.1654, 0, 24.7668, 12.1654, 0, -24.7668, 491.778, 0, -367.373, -3.36218, 0, 87.9976, 3.36218, 0, -87.9976, 517.421, 0, -487.432, 5.5556, 0, 25.0525, -5.5556, 0, -25.0525, 509.385, 0, -594.795, 30.5, 0, 47.8, -30.5, 0, -47.8, 464.22, 0, -681.554, 0, 0, 0, 0, 0, 0, 399.067, 0, -743.341, 60.6, 0, 3.1, -60.6, 0, -3.1, 316.369, 0, -768.935, 0, 0, 0, 0, 0, 0, 203.015, 0, -750.831, 31.5012, 0, -22.5854, -31.5012, 0, 22.5854, 108.485, 0, -687.368, 0, 0, 0, 0, 0, 0, 53.5728, 0, -608.098, 25.1007, 0, -49.8564, -25.1007, 0, 49.8564, 0.824, 0, -503.899, 0, 0, 0, 0, 0, 0, -11.1285, 0, -423.22, -32.55, 0, -35.1604, 32.55, 0, 35.1604, 17.2374, 0, -369.828, 0, 0, 0, 0, 0, 0, 80.0379, 0, -350.285, 5.36385, 0, -56.9972, -5.36385, 0, 56.9972, 126.927, 0, -312.831, 0, 0, 0, 0, 0, 0, 105.017, 0, -233.921, 0, 0, 0, 0, 0, 0, 74.5355, 0, -163.168, 0, 0, 0, 0, 0, 0, 24.6385, 0, -82.8791, -4.7305, 0, -58.7942, 4.7305, 0, 58.7942, -0.144, 0, 0.967),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
}
point_count = 35

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_g87kq"]
albedo_texture = ExtResource("4_1hrhv")
uv1_scale = Vector3(-0.255, 4, 4)
texture_filter = 2

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_v2pch"]
diffuse_mode = 3
albedo_color = Color(0.8, 0.691467, 0.208, 1)
metallic_specular = 0.0

[sub_resource type="PlaneMesh" id="PlaneMesh_flwbk"]
material = SubResource("StandardMaterial3D_v2pch")
size = Vector2(2000, 2000)

[node name="Node3D" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_565dx")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866025, -0.433013, 0.25, 0, 0.5, 0.866025, -0.5, 0.75, -0.433013, 0, 0, 0)
shadow_enabled = true

[node name="StaticBody3D" type="StaticBody3D" parent="."]

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D"]
shape = SubResource("WorldBoundaryShape3D_nc7ia")

[node name="CollisionShape3D2" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 0.965926, -0.258819, 0, 0.258819, 0.965926, 159.2, -2.5, 0)
shape = SubResource("BoxShape3D_p8n8q")

[node name="racers" type="Node3D" parent="."]

[node name="car" parent="racers" instance=ExtResource("1_fxqgc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.3924, 0)
linear_damp = 0.5
angular_damp = 2.0

[node name="PlayerController" type="Node" parent="racers/car"]
script = ExtResource("2_se1mj")

[node name="car2" parent="racers" instance=ExtResource("1_fxqgc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.46578, 0, 5.58116)
linear_damp = 0.5
angular_damp = 2.0

[node name="enemyController" type="Node" parent="racers/car2"]
script = ExtResource("3_kcsnn")

[node name="FollowCamera" parent="." node_paths=PackedStringArray("follow_target") instance=ExtResource("2_m7ru0")]
follow_target = NodePath("../racers/car")
rotation_damping = 10.0

[node name="Path3D" type="Path3D" parent="."]
curve = SubResource("Curve3D_8i7f3")

[node name="CSGPolygon3D" type="CSGPolygon3D" parent="Path3D"]
polygon = PackedVector2Array(-13, 0, 0, 0.1, 13, 0.1, 4, 0)
mode = 2
path_node = NodePath("..")
path_interval_type = 0
path_interval = 1.0
path_simplify_angle = 0.0
path_rotation = 2
path_local = false
path_continuous_u = true
path_u_distance = 10.0
path_joined = false
material = SubResource("StandardMaterial3D_g87kq")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.1, 0)
mesh = SubResource("PlaneMesh_flwbk")

[node name="racemanager" type="Node" parent="." node_paths=PackedStringArray("racerstobe", "path")]
unique_name_in_owner = true
script = ExtResource("5_6lhsm")
racerstobe = NodePath("../racers")
path = NodePath("../Path3D")
